# Health Check Client コンテナ

このプロジェクトでは、APIコンテナのヘルスチェックエンドポイントにリクエストを送信するためのクライアントコンテナを構築・実行します。クライアントコンテナは`requests`ライブラリを使用してAPIの`/health`エンドポイントにアクセスし、ステータスコードとレスポンスボディを出力します。

## ファイル構成

- **Dockerfile**: クライアントコンテナを構築するための設定ファイル。
- **client.py**: APIコンテナのヘルスチェックエンドポイントにアクセスするPythonスクリプト。

## 前提条件

- Podmanがインストールされていること。
- APIコンテナがホストのポート`8080`で起動しており、ヘルスチェックエンドポイント（例: `http://localhost:8080/health`）が利用可能であること。

## セットアップ手順

### 1. クライアントコンテナのビルド

まず、クライアントコンテナのイメージをビルドします。

```bash
podman build -t health-check-client .
```

### 2. APIコンテナの起動（例）

APIコンテナがまだ起動していない場合は、以下のようにポート`8080`でホストに公開して起動してください。

```bash
podman run -d --name health-check-api -p 8080:8080 api_image
```

### 3. クライアントコンテナの実行

クライアントコンテナを実行して、APIのヘルスチェックエンドポイントにアクセスします。`--network host`オプションを使用して、ホストのネットワークを介して`localhost:8080`に接続します。

```bash
podman run --network host health-check-client
```

### 4. 出力の確認

正常に動作している場合、以下のような出力が得られるはずです。

```plaintext
ステータスコード: 200
レスポンスボディ: OK
```

## ファイル詳細

### Dockerfile

この`Dockerfile`は、Python 3.12スリムイメージを使用し、`requests`ライブラリをインストールして、`client.py`を実行するための設定を行っています。

### client.py

`client.py`は、APIの`/health`エンドポイントにアクセスし、レスポンスのステータスコードとボディを出力するPythonスクリプトです。

以上で、クライアントコンテナのセットアップと実行が完了します。

